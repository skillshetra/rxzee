{% extends 'components/index.html' %}
{% block content %}
{% load static %}
{% load custom_filters %}
<div class="flex flex-col min-h-60 max-h-60 w-full bg-[#A3CCD9] font-bold px-4 sm:px-12 md:pl-20 lg:pl-32 lg:pr-16 xl:pl-64 2xl:pr-60 2xl:pl-[342px] pb-auto pt-5 select-none">{% include 'components/breadcrumbs.html' %}{% if one_drug %}<h1 class="w-full text-center text-lg sm:text-xl md:text-3xl xl:text-4xl mt-14">{{ one_drug|slice:":50" }} Interactions</h1><p class="w-full text-gray-800 text-center text-xs md:text-sm mt-2">There are {{ interactions.drugs|length }} drugs known to interact with {{ one_drug|slice:":50" }}, along with {{ interactions.disease|length }} disease interactions, and {{ interactions.food|length }} alcohol/food interactions.</p>{% else %}<h1 class="w-full text-center text-lg sm:text-xl md:text-3xl xl:text-4xl mt-14">Drug Interaction Report</h1><p class="w-full text-gray-800 text-center text-xs md:text-sm mt-2">There are {{ interactions.drugs|length }} drug to drug interaction, along with {{ interactions.disease|length }} disease interactions, and {{ interactions.food|length }} alcohol/food interactions.</p>{% endif %}
</div>
<section class="grid w-full items-start md:grid-cols-3 xl:grid-cols-4 px-4 sm:px-12 md:px-20 lg:px-36 xl:pl-80 2xl:pr-60 2xl:pl-[450px] 2xl:pr-[342px] gap-5 mx-auto">
<div class="flex flex-col w-full gap-5 md:col-span-2 xl:col-span-3">
{% if interaction_length > 0 %}
{% if one_drug %}
<div id="one_drug" class="flex flex-col gap-5 mt-5 lg:mt-10">
    <div class="flex flex-col gap-1">
        <h2 class="text-lg sm:text-xl md:text-2xl lg:md:text-3xl font-bold">{{ one_drug|slice:":50" }} Interactions</h2>
        <p class="text-justify">There are {{ interactions.drugs|length }} drugs known to interact with {{ one_drug }}, along with {{ interactions.disease|length }} disease interactions, and {{ interactions.food|length }} alcohol/food interactions.</p>
    </div>
    <div class="flex flex-col gap-1"><p class="sm:text-lg"><a href="#drug-interaction" class="text-[#0095FD] hover:underline">View all {{ interaction_length }} medications </a>that may interact with {{ one_drug|slice:":50" }}</p>{% if interactions.food %}<p class="sm:text-lg">View <a href="#food-interaction" class="text-[#0095FD] hover:underline">{{ one_drug|slice:":50" }} alcohol/food interactions ({{ interactions.food|length }})</a></p>{% endif %}{% if interactions.disease %}<p class="sm:text-lg">View <a href="#disease-interaction" class="text-[#0095FD] hover:underline">{{ one_drug|slice:":50" }} disease interactions ({{ interactions.disease|length }})</a></p>{% endif %}</p></div>
</div>
{% if interactions.drugs %}
<div id="drug-interaction" class="pt-5"><h3 class="sm:text-lg xl:text-xl 2xl:md:text-2xl font-bold mb-2">Drug Interactions</h3><div class="flex flex-col mb-5 gap-1"><h4 class="sm:text-lg md:text-xl">Most frequently checked interactions</h4><p>View interaction reports for {{ one_drug }} and the medicines listed below.</p><div class="flex flex-wrap gap-5 md:gap-10 sm:text-lg lg:text-xl"><div class="flex items-center gap-1 font-bold text-[#ff0000]"><span class="block min-h-4 max-h-4 min-w-4 max-w-4 bg-[#ff0000] rounded-full"></span>Major</div><div class="flex items-center gap-1 font-bold text-[#ba4e21]"><span class="block min-h-4 max-h-4 min-w-4 max-w-4 bg-[#f46d34] rounded-full"></span>Moderate</div><div class="flex items-center gap-1 font-bold text-[#af700d]"><span class="block min-h-4 max-h-4 min-w-4 max-w-4 bg-[#ffae33] rounded-full"></span>Minor</div></div></div>
<div class="grid md:grid-cols-2 gap-2">{% for drug in interactions.drugs %}<form action="/interaction-checker/interactions" class="drugs-single flex items-center gap-1 hidden">{% if drugs_list %}<input type="text" name="generic_name_list" class="hidden" value="{% if drug.first_drug == generic_name_list.0 %}{{ drug.second_drug }}{% else %}{{ drug.first_drug }}{% endif %}" /><input type="text" name="drugs_list" value="{{ one_drug }}" class="hidden" /> {% if drug.level == 'Major' %}<span class="block min-h-4 max-h-4 min-w-4 max-w-4 bg-[#ff0000] rounded-full"></span>{% elif drug.level == 'Moderate' %}<span class="block min-h-4 max-h-4 min-w-4 max-w-4 bg-[#f46d34] rounded-full"></span>{% elif drug.level == 'Minor' %}<span class="block min-h-4 max-h-4 min-w-4 max-w-4 bg-[#ffae33] rounded-full"></span> {% endif %}{% else %}<input type="text" name="generic_name_list" class="hidden" value="{{ generic_name_list.0 }}, {% if drug.first_drug == generic_name_list.0 %}{{ drug.second_drug }}{% else %}{{ drug.first_drug }}{% endif %}" />{% endif %}<button class="text-[#0095FD] hover:underline xl:text-lg">{% if drug.first_drug == generic_name_list.0 %}{{ drug.second_drug }}{% else %}{{ drug.first_drug }}{% endif %}</button></form>{% endfor %}<button class="{% if interactions.drugs|length < 50 %}hidden{% endif %} w-fit text-gray-200 bg-gray-900 py-1 px-5 rounded hover:bg-gray-800 transition duration-300 mt-3"id="view-more-single">View All</button>
</div>
</div>
{% endif %}
{% else %}
<div class="flex flex-col gap-2 mt-5">
    <h2 class="font-bold text-xl md:text-2xl xl:text-3xl">Drug Interaction Report</h2>
    <div class="flex flex-col gap-1">
        {% if drugs_list %}<p class="md:text-lg">{{ interaction_length }} potential interactions and/or warnings found for the following drugs:</p><ul class="font-bold list-disc md:pl-5">{% for drug in drugs_list %}<li>{{ drug }}</li>{% endfor %}</ul>{% endif %}
        {% if generic_name_list %}<p class="md:text-lg mt-2">{{ interaction_length }} potential interactions and/or warnings found for the following generic names :</p><ul class="grid md:grid-cols-2 font-bold list-disc md:pl-5">{% for generic_name in generic_name_list %}<li>{{ generic_name }}</li>{% endfor %}</ul>{% endif %}
    </div>
    <div class="flex flex-col gap-1 mt-2"><p class="sm:text-lg"><a href="#drug-interaction" class="text-[#0095FD] hover:underline">View all drug interactions.</a></p>{% if interactions.food %}<p class="sm:text-lg">View <a href="#food-interaction" class="text-[#0095FD] hover:underline">all alcohol/food interactions ({{ interactions.food|length }})</a></p>{% endif %}{% if interactions.disease %}<p class="sm:text-lg">View <a href="#disease-interaction" class="text-[#0095FD] hover:underline">disease interactions ({{ interactions.disease|length }})</a></p>{% endif %}</p></div>
</div>
{% if interactions.drugs %}<div id="drug-interaction" class="pt-5"><h3 class="sm:text-lg xl:text-2xl 2xl:md:text-3xl font-bold mb-2 text-[#7BA3B5]">Drug Interactions</h3><div class="flex flex-col gap-5"><div><div class="flex items-center border-b-2 border-gray-900 lg:text-lg font-bold"><span class="consumer block min-w-fit bg-[#A3CCD9] rounded-t p-2 cursor-pointer">Consumer</span><span class="professional block min-w-fit text-[#0095FD] rounded-t p-2 cursor-pointer">Professional</span></div></div>{% for interaction in interactions.drugs %}<div class="flex flex-col gap-1 mt-5md:pl-5"><h3 class="font-bold text-xl xl:text-2xl">Interactions between your drugs</h3><div class="flex items-start w-fit sm:items-center sm:justify-center gap-2"><div class="max-w-24 min-w-24 lg:text-lg font-bold text-center border-2 rounded-full py-1 px-2 {% if interaction.level == 'Major' %}text-[#ff0000] border-[#ff0000]{% elif interaction.level == 'Moderate' %}text-[#ba4e21] border-[#f46d34]{% elif interaction.level == 'Minor' %}text-[#af700d] border-[#ffae33]{% endif %}">{{ interaction.level }}</div><div class="flex flex-col gap-1"><div class="flex items-center gap-2 text-sm md:text-base xl:text-xl font-bold text-lg sm:text-xl"><span>{{ interaction.first_drug }}</span><svg class="min-w-5 min-h-5" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M16.5 3 21 7.5 16.5 12l-1.057-1.057 2.685-2.693H3v-1.5h15.128l-2.685-2.692L16.5 3ZM5.872 17.25l2.685 2.692L7.5 21 3 16.5 7.5 12l1.057 1.057-2.685 2.693H21v1.5H5.872Z"></path></svg><span>{{ interaction.second_drug }}</span></div>{% if drugs_list %}<div class="sm:text-lg">Applies to: {% for drug in drugs_list %}{% if interaction.first_drug in drug or interaction.second_drug in drug %}<span class="sabnalabs font-bold">{{ drug }}</span>{% endif %}{% endfor %}</div>{% endif %}</div></div><div id="content" class="consumer-content text-justify mt-2">{{ interaction.consumer|safe }}<p class="text-gray-700">Last Updated by <a href="/author/{{ interaction.author__id }}" class="font-bold text-[#0095FD] hover:underline">{{ interaction.author__first_name }}</a> on {{ interaction.last_updated }}</p></div><div id="content" class="professional-content text-justify hidden mt-2">{{ interaction.professional|safe }}</div></div>{% endfor %}</div></div>{% endif %}
{% endif %}
{% if interactions.food %}<div id="food-interaction" class="pt-5"><h3 class="sm:text-lg xl:text-2xl 2xl:md:text-3xl font-bold mb-2 md:mt-10 text-[#7BA3B5]">Drug and food interactions</h3><div class="flex flex-col gap-5"><div><div class="flex items-center border-b-2 border-gray-900 lg:text-lg font-bold"><span class="consumer block min-w-fit bg-[#A3CCD9] rounded-t p-2 cursor-pointer">Consumer</span><span class="professional block min-w-fit text-[#0095FD] rounded-t p-2 cursor-pointer">Professional</span></div></div>{% for interaction in interactions.food %}<div class="flex flex-col gap-1 mt-5 md:pl-5"><div class="flex items-start w-fit sm:justify-start gap-2"><div class="max-w-24 min-w-24 lg:text-lg font-bold text-center border-2 rounded-full py-1 px-2 mt-2 lg:mt-5 {% if interaction.level == 'Major' %}text-[#ff0000] border-[#ff0000]{% elif interaction.level == 'Moderate' %}text-[#ba4e21] border-[#f46d34]{% elif interaction.level == 'Minor' %}text-[#af700d] border-[#ffae33]{% endif %}">{{ interaction.level }}</div><div class="flex flex-col gap-1"><div class="flex text-xs sm:text-sm md:text-base 2xl:text-lg items-center gap-2 font-bold text-lg sm:text-xl"><div>{{ interaction.formula }}</div><svg class="min-w-5 min-h-5" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M16.5 3 21 7.5 16.5 12l-1.057-1.057 2.685-2.693H3v-1.5h15.128l-2.685-2.692L16.5 3ZM5.872 17.25l2.685 2.692L7.5 21 3 16.5 7.5 12l1.057 1.057-2.685 2.693H21v1.5H5.872Z"></path></svg><div class="max-w-[120px] md:max-w-fit">{{ interaction.header }}</div></div>{% if drugs_list %}<div class="sm:text-lg">Applies to: {% for drug in drugs_list %}{% if interaction.formula in drug %}<span class="font-bold">{{ drug }}</span>{% endif %}{% endfor %}</div>{% endif %}{% if interaction.severity %}<p class="text-sm md:text-sm">{{ interaction.severity }}</p>{% endif %}{% if interaction.other_details %}<p class="text-sm md:text-sm">{{ interaction.other_details }}</p>{% endif %}</div></div><div id="content" class="consumer-content text-justify mt-2">{{ interaction.consumer|safe }}<p class="text-gray-700">Last Updated by <a href="/author/{{ interaction.author__id }}" class="font-bold text-[#0095FD] hover:underline">{{ interaction.author__first_name }}</a> on {{ interaction.last_updated }}</p></div><div id="content" class="professional-content text-justify hidden mt-2">{{ interaction.professional|safe }}</div></div>{% endfor %}</div></div>{% endif %}
{% if interactions.disease %}<div id="disease-interaction" class="pt-5"><h3 class="sm:text-lg xl:text-2xl 2xl:md:text-3xl font-bold mb-2 md:mt-10 text-[#7BA3B5]">Drug and Disease interactions</h3>{% for interaction in interactions.disease %}<div class="flex flex-col gap-1 mt-5 md:pl-5"><div class="flex items-start w-fit sm:justify-start gap-2"><div class="max-w-24 min-w-24 lg:text-lg font-bold text-center border-2 rounded-full py-1 px-2 mt-2 lg:mt-5 {% if interaction.level == 'Major' %}text-[#ff0000] border-[#ff0000]{% elif interaction.level == 'Moderate' %}text-[#ba4e21] border-[#f46d34]{% elif interaction.level == 'Minor' %}text-[#af700d] border-[#ffae33]{% endif %}">{{ interaction.level }}</div><div class="flex flex-col gap-1"><div class="flex text-xs sm:text-sm md:text-base 2xl:text-lg items-center gap-2 font-bold text-lg sm:text-xl"><div>{{ interaction.formula }}</div><svg class="min-w-5 min-h-5" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M16.5 3 21 7.5 16.5 12l-1.057-1.057 2.685-2.693H3v-1.5h15.128l-2.685-2.692L16.5 3ZM5.872 17.25l2.685 2.692L7.5 21 3 16.5 7.5 12l1.057 1.057-2.685 2.693H21v1.5H5.872Z"></path></svg><div class="max-w-[120px] md:max-w-fit">{{ interaction.header }}</div></div>{% if drugs_list %}<div class="sm:text-lg">Applies to: {% for drug in drugs_list %}{% if interaction.formula in drug %}<span class="font-bold">{{ drug }}</span>{% endif %}{% endfor %}</div>{% endif %}{% if interaction.severity %}<p class="text-sm md:text-sm">{{ interaction.severity }}</p>{% endif %}</div></div><div id="content" class="text-justify mt-2">{{ interaction.content|safe }}<p class="text-gray-700">Last Updated by <a href="/author/{{ interaction.author__id }}" class="font-bold text-[#0095FD] hover:underline">{{ interaction.author__first_name }}</a> on {{ interaction.last_updated }}</p></div></div>{% endfor %}</div></div>{% endif %}
{% else %}<div class="flex flex-col gap-5"><h6 class="font-bold text-xl">Interactions between your drugs</h6><p>No drug interactions were detected among the medications in your list. However, this should not be interpreted as a guarantee that no interactions exist. It is crucial to recognize that the absence of reported interactions does not account for all possible scenarios. We strongly recommend consulting your healthcare provider for personalized advice and comprehensive evaluation. Your health and safety are paramount, so always seek professional guidance when considering medication combinations.</p></div>{% endif %}
</div>
{% include 'components/sidewidget.html' %}
</section>
</div>
{% if one_drug %}<script>document.querySelector("#view-more-single").addEventListener('click', (e) => {e.target.classList.add('hidden');document.querySelectorAll('.drugs-single').forEach(element => {element.classList.remove('hidden')})}); document.querySelectorAll('.drugs-single').forEach((element, index) => {if (index < 50) {element.classList.remove('hidden')}});</script>{% endif %}
<script>document.querySelectorAll(".consumer").forEach(consumer => consumer.addEventListener('click', event => { event.target.parentNode.parentNode.parentNode.querySelectorAll('.consumer-content').forEach(element => element.classList.remove('hidden')); event.target.parentNode.parentNode.parentNode.querySelectorAll('.professional-content').forEach(element => element.classList.add('hidden')); consumer.classList.add('bg-[#A3CCD9]'); consumer.classList.remove('text-[#0095FD]'); event.target.parentNode.parentNode.parentNode.querySelectorAll(".professional").forEach(professional => { professional.classList.remove('bg-[#A3CCD9]'); professional.classList.add('text-[#0095FD]'); }); })); document.querySelectorAll(".professional").forEach(professional => professional.addEventListener('click', event => { event.target.parentNode.parentNode.parentNode.querySelectorAll('.consumer-content').forEach(element => element.classList.add('hidden')); event.target.parentNode.parentNode.parentNode.querySelectorAll('.professional-content').forEach(element => element.classList.remove('hidden')); event.target.parentNode.querySelectorAll(".consumer").forEach(consumer => { consumer.classList.remove('bg-[#A3CCD9]'); consumer.classList.add('text-[#0095FD]'); }); professional.classList.add('bg-[#A3CCD9]'); professional.classList.remove('text-[#0095FD]'); })); document.querySelector("#faq_item").querySelector("div").classList.remove("hidden"); document.querySelector("#faq_item").querySelector("#hidden-svg").classList.add("hidden"); document.querySelector("#faq_item").querySelector("#show-svg").classList.remove("hidden");  document.querySelectorAll("#faq_item").forEach(faq => {faq.addEventListener("click", ()=>{document.querySelectorAll("#faq_item").forEach(element => {if (!element.querySelector("div").classList.contains("hidden") && element.innerHTML !== faq.innerHTML) { element.querySelector("div").classList.add("hidden"); element.querySelector("#show-svg").classList.add("hidden"); element.querySelector("#hidden-svg").classList.remove("hidden")}}); if (faq.querySelector("div").classList.contains("hidden")) { faq.querySelector("div").classList.remove("hidden"); faq.querySelector("#show-svg").classList.remove("hidden"); faq.querySelector("#hidden-svg").classList.add("hidden")}else { faq.querySelector("div").classList.add("hidden"); faq.querySelector("#show-svg").classList.add("hidden"); faq.querySelector("#hidden-svg").classList.remove("hidden")}})})</script>
{% endblock %}